<p-toast></p-toast>

<div class="card">
  <p-table [value]="sucursales" [paginator]="true" [rows]="10">
    <ng-template pTemplate="caption">
      <div class="flex align-items-center justify-content-between">
        <h2>Sucursales</h2>
        <div>
          <p-button icon="pi pi-plus" label="Crear Sucursal" (click)="abrirDialogCrear()"></p-button>
        </div>
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 30%;">ID</th>
        <th style="width: 30%;">Código</th>
        <th style="width: 30%;">Nombre</th>
        <th style="width: 1%;">Acciones</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-sucursal>
      <tr>
        <td>{{ sucursal.id }}</td>
        <td>{{ sucursal.codigoSucursal }}</td>
        <td>{{ sucursal.nombre }}</td>
        <td style="width: 1%;">
          <button pButton icon="pi pi-pencil" class="p-button-warning" (click)="abrirDialogEditar(sucursal)">Editar</button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-dialog header="Crear Nueva Sucursal" [(visible)]="mostrarDialogCrear" [modal]="true" [style]="{width: '50vw'}">
  <div class="p-fluid">
    <div class="field">
      <label htmlFor="codigo">Código</label>
      <input type="text" id="codigo" pInputText [(ngModel)]="nuevaSucursal.codigoSucursal" required>
    </div>
    <div class="field">
      <label htmlFor="nombre">Nombre</label>
      <input type="text" id="nombre" pInputText [(ngModel)]="nuevaSucursal.nombre" required>
    </div>
  </div>
  <ng-template pTemplate="footer">
    <p-button icon="pi pi-times" label="Cancelar" (click)="mostrarDialogCrear = false" class="p-button-secondary"></p-button>
    <p-button icon="pi pi-check" label="Guardar" (click)="crearSucursal()" [disabled]="!nuevaSucursal.codigoSucursal || !nuevaSucursal.nombre"></p-button>
  </ng-template>
</p-dialog>

<p-dialog header="Editar Sucursal" [(visible)]="mostrarDialogEditar" [modal]="true" [style]="{width: '50vw'}">
  <div class="p-fluid">
    <div class="field">
      <label htmlFor="editarCodigo">Código</label>
      <input type="text" id="editarCodigo" pInputText [(ngModel)]="sucursalSeleccionada.codigoSucursal" required>
    </div>
    <div class="field">
      <label htmlFor="editarNombre">Nombre</label>
      <input type="text" id="editarNombre" pInputText [(ngModel)]="sucursalSeleccionada.nombre" required>
    </div>
  </div>
  <ng-template pTemplate="footer">
    <p-button icon="pi pi-times" label="Cancelar" (click)="mostrarDialogEditar = false" class="p-button-secondary"></p-button>
    <p-button icon="pi pi-check" label="Guardar" (click)="editarSucursal()" [disabled]="!sucursalSeleccionada.codigoSucursal || !sucursalSeleccionada.nombre"></p-button>
  </ng-template>
</p-dialog>
